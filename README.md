## Интернет-магазин Megano ##
### 1. Общие сведения. ###
&nbsp;&nbsp;&nbsp;&nbsp;Интернет-магазин Megano представляет собой проект, разработанный с использованием<br>
фреймворка Django, (далее - Проект). В каталоге Проекта расположены: файлы с кодом на<br>
Python; файлы настроек проекта и виртуального окружения Python; пример файлов настроек<br>
серверов nginx и gunicorn для развёртывания Проекта на удалённом сервере; файл базы<br>
данных (использована СУБД SQLite). Бэкенд для Проекта выполнен приложениями: _api-auth,<br>
api-order, api-product_. Фронтенд реализован на фреймворке Vue3 и представляет собой пакет<br>
(package) для установки в Проект.
### 2. Развёртывание Проекта на сервере. ###
&nbsp;&nbsp;&nbsp;&nbsp;На сервере должна быть установлена серверная операционная система на базе Linux.<br>
(Тестирование проводилось на серверной Ubuntu 22.04). Python, как правило, на Linux ОС<br>
предустановлен. Если нет, то его необходимо установить глобально (в ОС сервера). Далее<br>
устанавливаем pipenv (если не установлен):<br>
___sudo apt install pipenv___
#### 2.1. Установка Проекта и виртуального окружения. ####
Далее представлены пояснения на конкретном примере установленного интернет-магазина.<br>
Установка Проекта на удалённый сервер представляет собой простое копирование каталога<br>
Проекта на сервер. Путь нашего Проекта на сервере:<br>
__/home/leowan/PyProjects/sb_megano/__<br>
В терминале переходим в указанный каталог, откуда создаём и активируем виртуальное<br>
окружение для Проекта:<br>
___pipenv shell___<br>
Путь к созданному виртуальному окружению:<br>
__/home/leowan/.local/share/virtualenvs/sb_megano-Pye1_wDu/__<br>
Далее работаем в терминале, находясь в каталоге Проекта.
#### 2.2. Установка необходимых пакетов. ####
Согласно данным файла _requirements.txt_ (находится в корне каталога с Проектом)<br>
устанавливаем в виртуальное окружение необходимые пакеты командой:<br>
___pipenv install package_name___
#### 2.3. Установка сервера gunicorn. ####
В качестве сервера, осуществляющего взаимодействие между Проектом и веб-сервером _nginx_<br>
устанавливаем в виртуальное окружение сервер _gunicorn_:<br>
___pipenv install gunicorn___<br>
Создаём для _gunicorn_ сервера файл настроек _gunicorn.config.py_ в каталоге виртуального<br>
окружения:<br>
__/home/leowan/.local/share/virtualenvs/sb_megano-Pye1_wDu/__<br>
Файл _gunicorn.config.py_ находится в каталоге _server_config_ Проекта.<br>
В каталоге:<br>
__/etc/systemd/system/__<br>
(в терминале переходим в этот каталог) создаём для _gunicorn_ сервис и сокет - файлы:<br>
_gunicorn_megano.service<br>
gunicorn_megano.socket_<br>
Для сервиса (первый файл) устанавливаем пользователя _leowan_ и группу _www-data_:<br>
__sudo chown leowan:www-data gunicorn_megano.service__<br>
Указанные файлы также находятся в каталоге _server_config_ Проекта.<br>
#### 2.4. Установка web-сервера nginx. ####
Для работы с media- и static- файлами потребуется отдельный web-сервер: _nginx_. Команда<br>
для установки (глобальная установка):<br>
___sudo apt install nginx___<br>
Создаём файл настроек сервера _nginx_ по пути:<br>
__/etc/nginx/sites-available/leowan_su__<br>
В терминале переходим на _/etc/nginx/sites-available/_ и ставим пользователя и группу<br>
_leowan_ для файла _leowan_su_:<br>
___sudo chown leowan:leowan leowan_su___<br>
Файл _leowan_su_ размещён в каталоге _server_config_ Проекта.<br>
В каталоге:<br>
__/etc/nginx/sites-enabled/__<br>
создаём символическую ссылку на вышеуказанный файл настроек:<br>
__sudo ln -s /etc/nginx/sites-available/leowan_su /etc/nginx/sites-enabled/__
### 3. Запуск Проекта на сервере. ###
&nbsp;&nbsp;&nbsp;&nbsp;Запуск и добавление в автозапуск сервисов _nginx_ и _gunicorn_ выполняются командами:<br>
___sudo systemctl start name.service<br>
sudo systemctl enable name.service___<br>
соответственно, (имя сервиса для _nginx_: _nginx.service_).<br>
После этого интернет-магазин Megano становится доступным по адресам:
+ http://megano.leowan.su/<br>
+ http://www.megano.leowan.su/<br>
